<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trackování Prášků</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            display: none; /* Skryjeme hlavní obsah stránky */
        }
        .login-container {
            text-align: center;
            margin-top: 100px;
        }
        .login-container input {
            font-size: 20px;
            padding: 10px;
            margin-top: 20px;
        }
        h1, h2 {
            text-align: center;
        }
        .pill-container {
            margin-bottom: 20px;
        }
        .pill-container label {
            display: block;
            margin-bottom: 10px;
        }
        .pill-container input[type="checkbox"] {
            margin-right: 10px;
        }
        .pill-container input[type="text"] {
            margin-left: 10px;
        }
        .hidden {
            display: none;
        }
        .timestamp {
            display: inline-block;
            margin-left: 10px;
            font-size: 0.9em;
            color: gray;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h1>Vložte heslo</h1>
        <input type="password" id="password-input" placeholder="Heslo">
    </div>
    <div class="container">
        <h1>Trackování Prášků</h1>
        <div id="date-container">
            <h2>Dnes je: <span id="current-date"></span> (<span id="current-day"></span>)</h2>
        </div>
        <div class="pill-container">
            <label>
                <input type="text" id="pill1-name" value="Prášek 1"> 
            </label>
            <label>
                <input type="checkbox" id="pill1-1"> 1. dávka <span class="timestamp" id="pill1-1-timestamp"></span>
            </label>
            <label>
                <input type="checkbox" id="pill1-2"> 2. dávka <span class="timestamp" id="pill1-2-timestamp"></span>
            </label>
            <label>
                <input type="checkbox" id="pill1-3"> 3. dávka <span class="timestamp" id="pill1-3-timestamp"></span>
            </label>
            <label>
                <input type="checkbox" id="pill1-4"> 4. dávka <span class="timestamp" id="pill1-4-timestamp"></span>
            </label>
        </div>
        <div class="pill-container">
            <label>
                <input type="text" id="pill2-name" value="Prášek 2"> 
            </label>
            <label>
                <input type="checkbox" id="pill2-1"> 1. dávka <span class="timestamp" id="pill2-1-timestamp"></span>
            </label>
            <label>
                <input type="checkbox" id="pill2-2"> 2. dávka <span class="timestamp" id="pill2-2-timestamp"></span>
            </label>
            <label>
                <input type="checkbox" id="pill2-3"> 3. dávka <span class="timestamp" id="pill2-3-timestamp"></span>
            </label>
            <label>
                <input type="checkbox" id="pill2-4"> 4. dávka <span class="timestamp" id="pill2-4-timestamp"></span>
            </label>
        </div>
        <div class="pill-container">
            <label>
                <input type="text" id="pill3-name" value="Prášek 3"> 
                <input type="checkbox" id="pill3"> ráno <span class="timestamp" id="pill3-timestamp"></span>
            </label>
        </div>
        <div class="pill-container">
            <label>
                <input type="text" id="pill4-name" value="Prášek 4"> 
                <input type="checkbox" id="pill4"> ráno <span class="timestamp" id="pill4-timestamp"></span>
            </label>
        </div>
        <div class="pill-container">
            <label>
                <input type="text" id="pill5-name" value="Prášek 5"> 
                <input type="checkbox" id="pill5"> večer <span class="timestamp" id="pill5-timestamp"></span>
            </label>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const dateContainer = document.getElementById('current-date');
            const dayContainer = document.getElementById('current-day');
            const pills = document.querySelectorAll('input[type="checkbox"]');
            const pillNames = document.querySelectorAll('input[type="text"]');
            const passwordInput = document.getElementById('password-input');
            const container = document.querySelector('.container');
            const loginContainer = document.querySelector('.login-container');

            // Funkce pro získání názvu dne v týdnu
            function getDayName(date, locale) {
                return date.toLocaleDateString(locale, { weekday: 'long' });
            }

            // Nastav aktuální datum a den v týdnu
            const today = new Date();
            const currentDate = today.toLocaleDateString('cs-CZ');
            const currentDay = getDayName(today, 'cs-CZ');
            dateContainer.textContent = currentDate;
            dayContainer.textContent = currentDay;

            // Zkontroluj a resetuj checkboxy pokud je nový den
            const savedDate = localStorage.getItem('savedDate');
            if (savedDate !== currentDate) {
                localStorage.clear();
                localStorage.setItem('savedDate', currentDate);
            } else {
                pills.forEach(pill => {
                    pill.checked = localStorage.getItem(pill.id) === 'true';
                    const timestamp = localStorage.getItem(`${pill.id}-timestamp`);
                    if (timestamp) {
                        document.getElementById(`${pill.id}-timestamp`).textContent = timestamp;
                    }
                });
                pillNames.forEach(pillName => {
                    if (localStorage.getItem(pillName.id)) {
                        pillName.value = localStorage.getItem(pillName.id);
                    }
                });
            }

            // Ulož stav checkboxů do localStorage
            pills.forEach(pill => {
                pill.addEventListener('change', () => {
                    const timestamp = new Date().toLocaleTimeString('cs-CZ');
                    localStorage.setItem(pill.id, pill.checked);
                    localStorage.setItem(`${pill.id}-timestamp`, timestamp);
                    document.getElementById(`${pill.id}-timestamp`).textContent = timestamp;
                });
            });

            // Ulož názvy prášků do localStorage
            pillNames.forEach(pillName => {
                pillName.addEventListener('input', () => {
                    localStorage.setItem(pillName.id, pillName.value);
                });
            });

            // Zobraz obsah stránky po zadání správného hesla
            passwordInput.addEventListener('input', () => {
                if (passwordInput.value === 'pokolo') {
                    loginContainer.style.display = 'none';
                    container.style.display = 'block';
                }
            });

            // Automaticky otevřít klávesnici pro zadání hesla
            passwordInput.focus();
        });
    </script>
</body>
</html>
